<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>【C】LV1-06-C语言-6指针 | 云与海</title><meta name="keywords" content="C"><meta name="author" content="qidaink"><meta name="copyright" content="qidaink"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="摘要：&amp;emsp;&amp;emsp;本文主要是记录C语言笔记——指针。">
<meta property="og:type" content="article">
<meta property="og:title" content="【C】LV1-06-C语言-6指针">
<meta property="og:url" content="https://qidaink-vercel-pages.vercel.app/post/84847102.html">
<meta property="og:site_name" content="云与海">
<meta property="og:description" content="摘要：&amp;emsp;&amp;emsp;本文主要是记录C语言笔记——指针。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://qidaink-vercel-pages.vercel.app/images/dafault-img.jpg">
<meta property="article:published_time" content="2022-01-15T08:29:55.000Z">
<meta property="article:modified_time" content="2022-02-23T04:18:49.482Z">
<meta property="article:author" content="qidaink">
<meta property="article:tag" content="C">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://qidaink-vercel-pages.vercel.app/images/dafault-img.jpg"><link rel="shortcut icon" href="/images/favicon32x32.ico"><link rel="canonical" href="https://qidaink-vercel-pages.vercel.app/post/84847102"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: qidaink","link":"链接: ","source":"来源: 云与海","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"top-center"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-02-23 12:18:49'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="stylesheet" href="/custom/css/custom.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_2482018_15wgmeyeygw.css"  media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><!-- Link Swiper's CSS -->
                                              <link rel="stylesheet" href = "https://unpkg.com/swiper@6.5.9/swiper-bundle.css">
                                              <link rel="stylesheet" href="https://unpkg.com/hexo-qidaink-swiper_bar/src/swiperbar.css">
                                             <!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/images/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">24</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 云与海</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw far fa-list-alt"></i><span> 文章清单</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/fcircle/"><i class="fa-fw fas fa-user-friends"></i><span> 朋友圈</span></a></div><div class="menus_item"><a class="site-page" href="/guestbook"><i class="fa-fw fas fa-edit"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i><span> 关于我</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/site/"><i class="fa-fw fas fa-atlas"></i><span> 关于本站</span></a></li><li><a class="site-page child" href="/about/mine/"><i class="fa-fw fas fa-fan"></i><span> 关于自己</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/images/dafault-img.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">云与海</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 云与海</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw far fa-list-alt"></i><span> 文章清单</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/fcircle/"><i class="fa-fw fas fa-user-friends"></i><span> 朋友圈</span></a></div><div class="menus_item"><a class="site-page" href="/guestbook"><i class="fa-fw fas fa-edit"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i><span> 关于我</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/site/"><i class="fa-fw fas fa-atlas"></i><span> 关于本站</span></a></li><li><a class="site-page child" href="/about/mine/"><i class="fa-fw fas fa-fan"></i><span> 关于自己</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">【C】LV1-06-C语言-6指针</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-15T08:29:55.000Z" title="发表于 2022-01-15 16:29:55">2022-01-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-02-23T04:18:49.482Z" title="更新于 2022-02-23 12:18:49">2022-02-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/ProgramLanguage/">ProgramLanguage</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>10分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="【C】LV1-06-C语言-6指针"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>摘要：<br>&emsp;&emsp;本文主要是记录<code>C语言</code>笔记——指针。</p>
<span id="more"></span>

<h1 id="一、指针"><a href="#一、指针" class="headerlink" title="一、指针"></a><font size=3>一、指针</font></h1><h2 id="1-什么是指针？"><a href="#1-什么是指针？" class="headerlink" title="1.什么是指针？"></a><font size=3>1.什么是指针？</font></h2><p>&emsp;&emsp;计算机中所有的数据都必须放在内存中，不同类型的数据占用的字节数不一样，例如<code>int</code>占用<code>4</code>个字节，<code>char </code>占用 1 个字节。为了正确地访问这些数据，必须为每个字节都编上号码，就像门牌号、身份证号一样，每个字节的<strong>编号</strong>是<strong>唯一</strong>的，根据编号可以准确地找到某个字节。</p>
<p>&emsp;&emsp;内存中字节的编号称为<strong>地址（<code>Address</code>）</strong>或<strong>指针（<code>Pointer</code>）</strong>。在C语言中，内存单元的地址称为指针，专门用来<strong>存放地址的变量</strong>，称为<strong>指针变量</strong>，在不影响理解的情况中，有时对地址、指针和指针变量不区分，通称指针。<br>$$<br>地址 = 指针 = 指针变量<br>$$<br>&emsp;&emsp;对于<code> 32 位</code>环境，程序能够使用的内存为 <code>4GB</code>，最小的地址为<code> 0x00000000</code>，最大的地址为 <code>0xFFFFFFFF</code>，注意这里的地址都是用<code>8</code>个十六进制数表示的，一共是<code>32</code>位。</p>
<p>&emsp;&emsp;对于<code>64</code>位系统来说，我们打印地址的时候会发现，它的地址都是由<code>12</code>个十六进制数表示的，这样算下来，才<code>48</code>位，按理来说不应该是<code>64</code>位吗？通过查阅资料，发现<code>48</code>位其实只是表象，显示了<code>48</code>位是因为目前为止<code>64</code>位系统的地址线只有<code>48</code>条。地址中第<code>48</code>位到第<code>63</code>位由第<code>47</code>位扩展而来（<strong>全0 全1</strong>）。因此有两段合法的地址空间，分别是</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0x0000 0000 0000 0000 - 0x0000 7FFF FFFF FFFF</span><br><span class="line">0xFFFF 8000 0000 0000 - 0xFFFF FFFF FFFF FFFF</span><br></pre></td></tr></table></figure>

<p>两段加起来总共<code>2^48Byte = 256TB</code>，一段是<code>128TB</code>，然而现在的<code>PC</code>基本达不到<code>128</code>的内存，因此第二段地址一般是见不到的，全都存在了第一段当中，所以看到的<code>48</code>位地址应该在前边再加上<code>0000</code>这才是完整的<code>64</code>位地址。</p>
<h2 id="2-一切皆地址？"><a href="#2-一切皆地址？" class="headerlink" title="2.一切皆地址？"></a><font size=3>2.一切皆地址？</font></h2><p>&emsp;&emsp;<code>C语言</code>用变量来存储数据，用函数来定义一段可以重复使用的代码，它们最终都要放到内存中才能供<code> CPU</code> 使用。<code>CPU</code> 只能通过<strong>地址</strong>来取得内存中的<strong>代码和数据</strong>，程序在执行过程中会告知 <code>CPU </code>要执行的代码以及要读写的数据的地址。</p>
<p>&emsp;&emsp;<code>CPU</code> 访问内存时需要的是<strong>地址</strong>，而不是变量名和函数名。<strong>变量名和函数名只是地址的一种助记符</strong>，当源文件被编译和链接成可执行程序后，它们都会被替换成地址。编译和链接过程的一项重要任务就是找到这些名称所对应的地址。</p>
<p>例如：</p>
<p>&emsp;&emsp;变量 <code>a、b、c </code>在内存中的地址分别是<code> 0X0000、0X0004、0X0008</code>，那么加法运算<code>c = a + b;</code>将会被转换成类似下面的形式：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0X0008</span> = (<span class="number">0X0000</span>) + (<span class="number">0X0004</span>);</span><br></pre></td></tr></table></figure>

<p><code>( )</code>表示取值操作，整个表达式的意思是，取出地址 <code>0X0000</code> 和 <code>0X0004</code> 上的值，将它们相加，把相加的结果赋值给地址为 <code>0X0008</code> 的内存。</p>
<p>&emsp;&emsp;所以，从根本上来说，数据的运算其实都是通过地址来运算的。</p>
<h2 id="3-为什么要用指针？"><a href="#3-为什么要用指针？" class="headerlink" title="3.为什么要用指针？"></a><font size=3>3.为什么要用指针？</font></h2><p>&emsp;&emsp;C程序设计中使用指针可以</p>
<ul>
<li><p>使程序简洁、紧凑、高效。</p>
</li>
<li><p>有效地表示复杂的数据结构。</p>
</li>
<li><p>动态分配内存。</p>
</li>
<li><p>得到多于一个的函数返回值。</p>
</li>
</ul>
<h2 id="4-怎么使用指针？"><a href="#4-怎么使用指针？" class="headerlink" title="4.怎么使用指针？"></a><font size=3>4.怎么使用指针？</font></h2><h3 id="4-1指针变量的定义"><a href="#4-1指针变量的定义" class="headerlink" title="4.1指针变量的定义"></a><font size=3>4.1指针变量的定义</font></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">storage_type data_type *p_name;</span><br></pre></td></tr></table></figure>

<table>
    <tr>
        <td align="center" width=100px>storage_type</td>
        <td align="left">存储类型（指针变量本身的存储类型,可以说明也可以不说明）</td>
    </tr>
    <tr>
        <td align="center" width=100px>data_type</td>
        <td align="left">任意有效的 C 数据类型（指针目标的数据类型，必须说明）</td>
    </tr>
    <tr>
        <td align="center" width=100px>p_name</td>
        <td align="left">指针变量名</td>
    </tr>
</table>

<p>例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> *p1;  <span class="comment">/* p1是一个指向静态整型变量的指针变量 */</span></span><br><span class="line"><span class="keyword">float</span> *p2;       <span class="comment">/* p2是一个指向浮点型变量的指针变量 */</span></span><br><span class="line"><span class="keyword">char</span> *p3;        <span class="comment">/* p3是一个指向字符型变量的指针变量 */</span></span><br><span class="line"><span class="keyword">int</span> *a, *b, *c;  <span class="comment">/* a、b、c 的都是 int* 类型的指针变量 */</span></span><br><span class="line"><span class="keyword">int</span> *a, b, c;    <span class="comment">/* a 是 int* 类型的指针变量，b、c 都是类型为 int 的普通变量 */</span></span><br></pre></td></tr></table></figure>

<p>【注意】指针说明时指定的数据类型不是指针变量本身的数据类型，而是指针目标的数据类型。简称为指针的数据类型。</p>
<p>【说明】引入指针要注意程序中的<code>p</code>、<code>*p</code> 和 <code>&amp;p</code> 三种表示方法的不同意义。设<code>p</code>为一个指针(<code>int *p;</code>)则：</p>
<table>
   <tr>
       <td align="center">p</td>
       <td align="left"> 指针变量， 它的内容是地址量</td>
   </tr>
    <tr>
       <td align="center">*p</td>
       <td align="left"> 指针所指向的对象， 它的内容是数据</td>
   </tr>
    <tr>
       <td align="center">&p</td>
       <td align="left"> 指针变量占用的存储区域的地址，是个常量</td>
   </tr>
</table>

<h3 id="4-2指针变量的赋值"><a href="#4-2指针变量的赋值" class="headerlink" title="4.2指针变量的赋值"></a><font size=3>4.2指针变量的赋值</font></h3><p>&emsp;&emsp;指针变量在使用前，不仅要<strong>定义说明</strong>，而且要<strong>赋予具体的值</strong>，如果没有确切的地址可以赋值，为指针变量赋一个<code>NULL</code>值（赋为 <code>NULL</code> 值的指针被称为<strong>空指针</strong>），未经赋值的指针不能随便使用，否则将导致程序的错误，并且指针变量的值只能是<strong>变量的地址</strong>，不能是其他数据，否则将会导致错误产生。</p>
<p>&emsp;&emsp;没有合法指向的指针称为<strong>“野”指针</strong>。“野”指针随机指向一块空间，该空间中存储的可能是其他程序的数据甚至是系统数据，故不能对“野”指针所指向的空间进行存取操作，否则轻者会引起程序崩溃，严重的可能导致整个系统崩溃。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 1. 定义时直接赋值 */</span></span><br><span class="line">&lt;存储类型&gt;  &lt;数据类型&gt;  *&lt;指针变量名&gt; = &lt;地址量&gt;; </span><br><span class="line"></span><br><span class="line"><span class="comment">/* 2. 定义完成后再赋值 */</span></span><br><span class="line">&lt;存储类型&gt;  &lt;数据类型&gt;  *&lt;指针变量名&gt;;</span><br><span class="line">&lt;指针变量名&gt; = &lt;地址量&gt;;</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">10</span>;        <span class="comment">/* 定义一个整型变量 */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> *p = <span class="literal">NULL</span>;     <span class="comment">/* 定义一个空指针 */</span></span><br><span class="line"><span class="keyword">int</span> *p1 = &amp;a;      <span class="comment">/* 定义一个指针变量 p1，同时赋初值，使其指向整型变量 a */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> *p2;           <span class="comment">/* 定义一个指针变量 p2，不进行初始化赋值  */</span></span><br><span class="line">p2 = &amp;a;           <span class="comment">/* 将变量 a 的地址赋给指针变量 p2 ，使其指向整型变量 a */</span></span><br></pre></td></tr></table></figure>

<p>【注意】</p>
<p>&emsp;&emsp;（1）<strong>定义</strong>指针变量时必须<strong>带<code>*</code><strong>，给指针变量</strong>赋值</strong>时**不能带<code>*</code>**。</p>
<p>&emsp;&emsp;（2）和普通变量一样，指针变量也可以被多次修改，可以改变指针变量的值，使其指向不同的地址。</p>
<p>&emsp;&emsp;（3）地址量必须是一个<strong>地址</strong>，若是普通变量，要加上**取地址<code>&amp;</code>**符号。</p>
<h3 id="4-3指针变量的引用"><a href="#4-3指针变量的引用" class="headerlink" title="4.3指针变量的引用"></a><font size=3>4.3指针变量的引用</font></h3><ul>
<li>获取数据</li>
</ul>
<p>&emsp;&emsp;指针变量存储了数据的地址，通过指针变量能够获得该地址上的数据，格式为：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*&lt;p_name&gt;;</span><br></pre></td></tr></table></figure>

<p>&emsp;&emsp;这里的<code>*</code>并不是乘号，而是被称为<strong>指针运算符</strong>，用来获取指针变量所指向地址中所存储的数据。</p>
<p>例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a =<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> *p1 = &amp;a;</span><br><span class="line">    <span class="keyword">int</span> *p2;</span><br><span class="line">    p2 = &amp;a;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;a=%d, *p1=%d, *p2=%d\n&quot;</span>, a, *p1, *p2);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220130130321406.png" alt="image-20220130130321406" style="zoom:80%;" />

<ul>
<li>修改数据</li>
</ul>
<p>&emsp;&emsp;通过指针可以直接修改指针所指向变量的数据，使用格式如下</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*&lt;p_name&gt; = value;</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a =<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> *p1 = &amp;a;</span><br><span class="line">    <span class="keyword">int</span> *p2;</span><br><span class="line">    p2 = &amp;a;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;a=%d, *p1=%d, *p2=%d\n&quot;</span>, a, *p1, *p2);</span><br><span class="line">    *p1 = <span class="number">20</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;a=%d, *p1=%d, *p2=%d\n&quot;</span>, a, *p1, *p2);</span><br><span class="line">    *p2 = <span class="number">30</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;a=%d, *p1=%d, *p2=%d\n&quot;</span>, a, *p1, *p2);</span><br><span class="line">    a = <span class="number">40</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;a=%d, *p1=%d, *p2=%d\n&quot;</span>, a, *p1, *p2);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220130141024744.png" alt="image-20220130141024744" style="zoom: 67%;" />

<h3 id="4-4指针和变量在内存中的存放"><a href="#4-4指针和变量在内存中的存放" class="headerlink" title="4.4指针和变量在内存中的存放"></a><font size=3>4.4指针和变量在内存中的存放</font></h3><p>&emsp;&emsp;要想更加清楚地理解指针变量，我们可以编写程序来进行测试，好清楚它在内存中的情况。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a =<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> *p1 = &amp;a;</span><br><span class="line">    <span class="keyword">int</span> *p2;</span><br><span class="line">    p2 = &amp;a;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;a=%d, &amp;a=%p\n&quot;</span>, a, &amp;a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;*p1=%d, p1=%p, &amp;p1=%p, &amp;(*p1)=%p\n&quot;</span>, *p1, p1, &amp;p1, &amp;(*p1));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;*p2=%d, p2=%p, &amp;p2=%p, &amp;(*p2)=%p\n&quot;</span>, *p2, p2, &amp;p2, &amp;(*p2));</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220130174049078.png" alt="image-20220130174049078" style="zoom: 67%;" />

<p>&emsp;&emsp;通过打印指针变量的地址以及普通变量的地址可以得到指针变量和普通变量在内存中的存放如下所示：</p>
<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220130180725096.png" alt="image-20220130180725096" style="zoom:60%;" />

<h2 id="5-指针占几个字节？"><a href="#5-指针占几个字节？" class="headerlink" title="5.指针占几个字节？"></a><font size=3>5.指针占几个字节？</font></h2><p>&emsp;&emsp;从上边对指针的概念的阐述中可以得出，指针也可以称之为地址，而地址的大小就与计算机多少位相关联起来。常见的就是<code>64</code>位系统和<code>32</code>位系统，接下来就来验证一下不同位数的系统中的指针大小。</p>
<ul>
<li><code>64</code>位系统</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a =<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> *p = &amp;a;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;sizeof(p)=%ld\n&quot;</span>,<span class="keyword">sizeof</span>(p));</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220130181429628.png" alt="image-20220130181429628" style="zoom:67%;" />

<p>可以看出在<code>64</code>位系统下，指针变量<code>p</code>占据了<code>8Byte</code>的空间，一共就是<code>64bit</code>。</p>
<ul>
<li><code>32</code>位系统</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a =<span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> *p = &amp;a;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;sizeof(p)=%ld\n&quot;</span>,<span class="keyword">sizeof</span>(p));<span class="comment">/* %ld 要改为 %d，否则就会有一个警告 */</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220130182415239.png" alt="image-20220130182415239" style="zoom:67%;" />

<p>可以看出在<code>32</code>位系统下，指针变量<code>p</code>占据了<code>4Byte</code>的空间，一共就是<code>32bit</code>。</p>
<h2 id="6-指针的运算"><a href="#6-指针的运算" class="headerlink" title="6.指针的运算"></a><font size=3>6.指针的运算</font></h2><p>&emsp;&emsp;指针运算是以指针变量所存放的地址量作为运算量而进行的运算，指针运算的<strong>实质就是地址的计算</strong>，指针运算的种类是有限的，它只能进行<strong>赋值运算</strong>、<strong>算术运算</strong>和<strong>关系运算</strong>。</p>
<h3 id="6-1指针的赋值运算"><a href="#6-1指针的赋值运算" class="headerlink" title="6.1指针的赋值运算"></a><font size=3>6.1指针的赋值运算</font></h3><p>见 4.2指针变量的赋值 一节。</p>
<h3 id="6-2指针的算术运算"><a href="#6-2指针的算术运算" class="headerlink" title="6.2指针的算术运算"></a><font size=3>6.2指针的算术运算</font></h3><ul>
<li>算术运算</li>
</ul>
<p>&emsp;&emsp;先定义指针变量 <code>px  和 py</code> 。</p>
<table style="font-weight: bold;">
    <tr>
        <td align="center" style="font-weight: bold;">运算符</td>
        <td align="center" style="font-weight: bold;">计算形式</td>
        <td align="center" style="font-weight: bold;">含义</td>
    </tr>
    <tr>
        <td align="center" style="font-weight: bold;">+</td>
        <td align="center" style="font-weight: bold;">px + n</td>
        <td align="left" style="font-weight: bold;">指针向地址大的方向移动 n 个数据<br>实际位置的地址量: (px) + sizeof(px的指向的数据类型) * n</td>
    </tr>
    <tr>
        <td align="center" style="font-weight: bold;">-</td>
        <td align="center" style="font-weight: bold;">px - n</td>
        <td align="left" style="font-weight: bold;">指针向地址小的方向移动 n 个数据<br>实际位置的地址量是: (px) - sizeof(px的指向的数据类型) * n</td>
    </tr>
    <tr>
        <td align="center" style="font-weight: bold;" rowspan="2">++</td>
        <td align="center" style="font-weight: bold;">px++</td>
        <td align="left" style="font-weight: bold;" rowspan="2">指针向地址大的方向移动 n 个数据</td>
    </tr>
    <tr>
        <td align="center" style="font-weight: bold;">++px</td>
    </tr>
    <tr>
        <td align="center" style="font-weight: bold;" rowspan="2">--</td>
        <td align="center" style="font-weight: bold;">px--</td>
        <td align="left" style="font-weight: bold;" rowspan="2">指针向地址小的方向移动 n 个数据</td>
    </tr>
    <tr>
        <td align="center" style="font-weight: bold;">--px</td>
    </tr>
    <tr>
        <td align="center" style="font-weight: bold;">-</td>
        <td align="center" style="font-weight: bold;">px - py</td>
        <td align="left" style="font-weight: bold;">指针 px 与 py之间间隔元素的个数<br>px 和 py 必须是同意数据类型的指针变量，否则两者相减毫无意义。</td>
    </tr>
</table>



<p>【注意】</p>
<p>&emsp;&emsp;（1）不同数据类型的两个指针实行加减整数运算是无意义的。</p>
<p>&emsp;&emsp;（2）<code>px - py</code>运算的结果<strong>不是地址量</strong>，而<strong>是一个整数值</strong>，意思就它们相减的结果是<strong>两指针</strong>指向的地址位置<strong>之间相隔数据的个数</strong>，而<strong>不是</strong>两指针持有的<strong>地址值相减</strong>的结果。（<strong>两指针数据类型要一致</strong>）</p>
<ul>
<li>实例</li>
</ul>
<p>&emsp;&emsp;这里需要提前用一下下边要说的指针与数组的知识，这样通过数组来进行验证，对于指针的算术运算更容易理解些。这里主要验证两指针相减的情况，其他的都比较简单，下一节介绍数组与指针的时候也会经常用到。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[<span class="number">6</span>]  = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    <span class="keyword">char</span> b[<span class="number">6</span>] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">int</span> *px1 = &amp;a[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">int</span> *py1 = &amp;a[<span class="number">5</span>];</span><br><span class="line">    <span class="keyword">char</span> *px2 = &amp;b[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">char</span> *py2 = &amp;b[<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;a[%d]=%d , &amp;a[%d]=%p | b[%d]=%d , &amp;b[%d]=%p\n&quot;</span>, i, a[i], i, &amp;a[i], i, b[i], i, &amp;b[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%p - %p = %ld\n&quot;</span>, py1, px1, py1 - px1);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%p - %p = %ld\n&quot;</span>, py2, px2, py2 - px2);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220130210001974.png" alt="image-20220130210001974" style="zoom: 67%;" />

<h3 id="6-3指针的关系运算"><a href="#6-3指针的关系运算" class="headerlink" title="6.3指针的关系运算"></a><font size=3>6.3指针的关系运算</font></h3><ul>
<li>关系运算</li>
</ul>
<p>&emsp;&emsp;两指针之间的关系运算表示它们指向的<strong>地址位置之间的关系</strong>。指向地址大的指针大于指向地址小的指针。</p>
<table style="font-weight: bold;">
    <tr>
        <td align="center" style="font-weight: bold;">运算符</td>
        <td align="center" style="font-weight: bold;">说明</td>
        <td align="center" style="font-weight: bold;">举例</td>
    </tr>
    <tr>
        <td align="center" style="font-weight: bold;"> > </td>
        <td align="center" style="font-weight: bold;">大于</td>
        <td align="center" style="font-weight: bold;">px > py</td>
    </tr>
    <tr>
        <td align="center" style="font-weight: bold;"> < </td>
        <td align="center" style="font-weight: bold;">小于</td>
        <td align="center" style="font-weight: bold;">px < py</td>
    </tr>
    <tr>
        <td align="center" style="font-weight: bold;"> >= </td>
        <td align="center" style="font-weight: bold;">大于等于</td>
        <td align="center" style="font-weight: bold;">px >= py</td>
    </tr>
    <tr>
        <td align="center" style="font-weight: bold;"> <= </td>
        <td align="center" style="font-weight: bold;">小于等于</td>
        <td align="center" style="font-weight: bold;">px <= py</td>
    </tr>
    <tr>
        <td align="center" style="font-weight: bold;"> == </td>
        <td align="center" style="font-weight: bold;">等于</td>
        <td align="center" style="font-weight: bold;">px == py</td>
    </tr>
    <tr>
        <td align="center" style="font-weight: bold;"> != </td>
        <td align="center" style="font-weight: bold;">不等于</td>
        <td align="center" style="font-weight: bold;">px ！= py</td>
    </tr>
</table>
【注意】

<p>&emsp;&emsp;（1）不同数据类型的指针之间的关系运算没有任何意义，指向不同数据区域的数据的两个指针之间的关系运算也没有意义。</p>
<p>&emsp;&emsp;（2）指针与一般整数变量之间的关系运算没有意义。但可以和<code>0(NULL)</code>进行等于或不等于的关系运算，判断指针是否为空。</p>
<h2 id="7-void指针"><a href="#7-void指针" class="headerlink" title="7.void指针"></a><font size=3>7.<code>void</code>指针</font></h2><h3 id="7-1void指针概念"><a href="#7-1void指针概念" class="headerlink" title="7.1void指针概念"></a><font size=3>7.1<code>void</code>指针概念</font></h3><p>&emsp;&emsp;<code>void</code>指针是一种<strong>不确定数据类型的指针变量</strong>，它可以通过<strong>强制类型转换</strong>让该变量<strong>指向任何数据类型</strong>的变量。由于 <code>void</code> 指针没有特定的类型，因此它可以<strong>指向任何类型的数据</strong>。</p>
<p style="color:red;">
    &emsp;&emsp;任何类型的指针都可以直接赋值给 void 指针，而无需进行其他相关的强制类型转换。<br>
    &emsp;&emsp;要将void 指针 赋给其他类型的指针，则需要强制类型转换。
</p>

<h3 id="7-2一般形式"><a href="#7-2一般形式" class="headerlink" title="7.2一般形式"></a><font size=3>7.2一般形式</font></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> *&lt;指针变量名称&gt;;</span><br></pre></td></tr></table></figure>

<p>【注意】</p>
<p>&emsp;&emsp;在 <code>ANSI C</code> 标准中，对于<code>void</code>指针，虽然任何类型的指针都可以直接赋值给 <code>void</code> 指针，但是在<strong>没有强制类型转换之前，不能进行任何指针的算术运算</strong>，这是因为在引用指针目标值时，<code>void *</code>相当于类型不确定，只知道指针指的起始地址，但是不知道占用的字节数，所以就没有颁发决定以什么单位来进行偏移，就会出现编译错误。</p>
<p>&emsp;&emsp;在 <code>GNU</code> 中则允许其进行算术运算，因为在默认情况下，<code>GNU</code> 认为 <code>void * 和 char * </code>一样，既然是确定的，当然可以进行一些算术操作。</p>
<h3 id="7-3使用规则"><a href="#7-3使用规则" class="headerlink" title="7.3使用规则"></a><font size=3>7.3使用规则</font></h3><p>&emsp;&emsp;进行强制类型转换格式：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*(&lt;目标数据类型&gt; *)&lt;指针变量名&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>对<code>void</code>指针赋值</li>
</ul>
<p><code>void </code>指针可以指向任意类型的数据，就是说可以用任意类型的指针对 <code>void</code>指针赋值。</p>
<p>例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *a;  <span class="comment">/* 定义一个整型指针变量 a */</span></span><br><span class="line"><span class="keyword">void</span> *p; <span class="comment">/* 定义一个 void 型指针变量 p */</span></span><br><span class="line">p = a;   <span class="comment">/* 将指针变量 a 指向的地址赋值给 p */</span></span><br></pre></td></tr></table></figure>

<ul>
<li>将<code>void</code>指针赋给其他类型指针</li>
</ul>
<p>&emsp;&emsp;“空类型”可以包容“有类型”，而“有类型”则不能包容“空类型”，要将<code>void</code>指针赋值给其他类型的指针，必须进行强制类型转换。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> *p1;     <span class="comment">/* 定义一个 void 型指针变量 p1 */</span></span><br><span class="line"><span class="keyword">int</span> *p2;      <span class="comment">/* 定义一个整型指针变量 p2 */</span></span><br><span class="line">p2 = (<span class="keyword">int</span>*)p1;<span class="comment">/* 将void指针变量p1赋值给int指针变量p2 */</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用<code>void</code>指针</li>
</ul>
<p>&emsp;&emsp;必须进行强制类型转换才可以使用。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *a;  <span class="comment">/* 定义一个整型指针变量 a */</span></span><br><span class="line"><span class="keyword">void</span> *p; <span class="comment">/* 定义一个 void 型指针变量 p */</span></span><br><span class="line"></span><br><span class="line">p = a;   <span class="comment">/* 将指针变量 a 指向的地址赋值给 p */</span></span><br><span class="line"></span><br><span class="line">ptrintf(<span class="string">&quot;*p=%d\n&quot;</span>, *(<span class="keyword">int</span> *)p);</span><br></pre></td></tr></table></figure>

<h2 id="8-const指针"><a href="#8-const指针" class="headerlink" title="8.const指针"></a><font size=3>8.<code>const</code>指针</font></h2><h3 id="8-1const变量"><a href="#8-1const变量" class="headerlink" title="8.1const变量"></a><font size=3>8.1<code>const</code>变量</font></h3><p>&emsp;&emsp;<code>C语言</code>中，关键字<code>const</code>修饰变量，可以使<strong>变量常量化</strong>，这样就使得变量的值不能修改，从而达到保护变量的目的。一般的说明形式如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &lt;数据类型&gt; 变量名 = [&lt;表达式&gt;] ;</span><br></pre></td></tr></table></figure>

<p>&emsp;&emsp;那如果说当变量有<code>const</code>修饰时，想用指针间接访问变量，指针也要有<code>const</code>修饰。那么<code>const</code>放在指针声明的什么位置呢？请接着往下看。</p>
<h3 id="8-2常量化指针目标表达式"><a href="#8-2常量化指针目标表达式" class="headerlink" title="8.2常量化指针目标表达式 "></a><font size=3>8.2常量化指针目标表达式 </font></h3><ul>
<li>一般形式</li>
</ul>
<p>&emsp;&emsp;常量化指针目标是<strong>限制通过指针改变其目标的数值</strong> ，但**<code>&lt;指针变量&gt;</code>存储的地址值可以修改**。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &lt;数据类型&gt; *&lt;指针变量名称&gt;[= &lt;指针运算表达式&gt;];</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> *p = &amp;a;</span><br></pre></td></tr></table></figure>

<p>分析：上边定义了两个整型变量<code>a,b</code>和一个带有<code>const</code>修饰的指针变量，此时指针<code>p</code>指向的是<code>a</code>，我们<strong>可以</strong>改变<code>p</code>中的地址值，即通过<code>p = &amp;b;</code>使其指向<code>b</code>；我们<strong>也可以</strong>通过<code>*p</code>来访问相应的目标值，但是，我们<strong>无法</strong>通过<code>*p = 30;</code>这样的赋值操作来改变目标值，若强行修改则会报以下错误：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error: assignment of read-only location ‘*p’</span><br></pre></td></tr></table></figure>

<h3 id="8-3常量化指针变量"><a href="#8-3常量化指针变量" class="headerlink" title="8.3常量化指针变量"></a><font size=3>8.3常量化指针变量</font></h3><ul>
<li>一般形式</li>
</ul>
<p>&emsp;&emsp;常量化指针变量，使得**<code>&lt;指针变量&gt;</code>存储的地址值不可被修改<strong>，但是</strong>可以通过<code>*&lt;指针变量名称&gt;</code>修改指针所指向变量的值**。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;数据类型&gt; * <span class="keyword">const</span> &lt;指针变量名&gt; = &lt;指针运算表达式&gt; ; </span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">int</span> * <span class="keyword">const</span> p = &amp;a;</span><br></pre></td></tr></table></figure>

<p>分析：上边定义了两个整型变量<code>a,b</code>和一个带有<code>const</code>修饰的指针变量，此时指针<code>p</code>指向的是<code>a</code>，我们<strong>无法</strong>改变<code>p</code>中的地址值，即通过<code>p = &amp;b;</code>使其指向<code>b</code>若强行修改则会报以下错误：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error: assignment of read-only variable ‘p’</span><br></pre></td></tr></table></figure>

<p>我们<strong>可以</strong>通过<code>*p</code>来访问相应的目标值，我们<strong>也可以</strong>通过<code>*p = 30;</code>这样的赋值操作来改变目标值。</p>
<h3 id="8-4常量化指针变量及其目标表达式"><a href="#8-4常量化指针变量及其目标表达式" class="headerlink" title="8.4常量化指针变量及其目标表达式  "></a><font size=3>8.4常量化指针变量及其目标表达式  </font></h3><ul>
<li>一般形式</li>
</ul>
<p>&emsp;&emsp;常量化指针变量及其目标表达式，使得<strong>既不可以修改&lt;指针变量&gt;的地址</strong>，也<em><em>不可以通过</em>&lt;指针变量名称&gt;修改指针所指向变量的值</em>*。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &lt;数据类型&gt; *<span class="keyword">const</span> &lt;指针变量名&gt; = &lt;指针运算表达式&gt; ; </span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> * <span class="keyword">const</span> p = &amp;a;</span><br></pre></td></tr></table></figure>

<p>分析：上边定义了两个整型变量<code>a,b</code>和一个带有<code>const</code>修饰的指针变量，此时指针<code>p</code>指向的是<code>a</code>，我们<strong>无法</strong>改变<code>p</code>中的地址值，即通过<code>p = &amp;b;</code>使其指向<code>b</code>；我们<strong>可以</strong>通过<code>*p</code>来访问相应的目标值，但是，我们<strong>无法</strong>通过<code>*p = 30;</code>这样的赋值操作来改变目标值。若强行修改地址值或者目标值，则会报以下错误：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">error: assignment of read-only variable ‘p’  <span class="comment">/* 通过p=&amp;b;修改存储的地址值 */</span></span><br><span class="line">error: assignment of read-only location ‘*p’ <span class="comment">/* 通过*p=30;修改目标值 */</span></span><br></pre></td></tr></table></figure>

<h1 id="二、指针与数组"><a href="#二、指针与数组" class="headerlink" title="二、指针与数组"></a><font size=3>二、指针与数组</font></h1><h2 id="1-指针与一维数组"><a href="#1-指针与一维数组" class="headerlink" title="1.指针与一维数组"></a><font size=3>1.指针与一维数组</font></h2><h3 id="1-1数组的指针"><a href="#1-1数组的指针" class="headerlink" title="1.1数组的指针"></a><font size=3>1.1数组的指针</font></h3><p>&emsp;&emsp;数组元素的地址是指数组元素在内存中的起始地址，可以由各个元素加上取地址符号<code>&amp;</code>组成，而数组名就代表了数组的起始地址。</p>
<p>&emsp;&emsp;<strong>数组指针</strong>就是指向<strong>数组起始地址</strong>的指针，其本质就是指针，一维数组名可以看做是一维数组的指针（但是一维数组名不能像指针变量那样做自<code>++</code>和<code>--</code>运算）</p>
<h3 id="1-2数组元素的表示"><a href="#1-2数组元素的表示" class="headerlink" title="1.2数组元素的表示"></a><font size=3>1.2数组元素的表示</font></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[<span class="number">3</span>]  = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> *p = a;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;a[i]\t p[i]\t *(a+i)\t *(p+i)\t|&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\t   &amp;a[i]\t    &amp;p[i]\t     a+i\t     p+i \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;---------------------------------------------------&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;---------------------------------------------------\n&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot; %d\t   %d\t    %d\t    %d\t|&quot;</span>, a[i], p[i], *(a+i), *(p+i));</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\t%p\t%p\t%p\t%p\n&quot;</span>, &amp;a[i], &amp;p[i], a+i, p+i);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220204134546751.png" alt="image-20220204134546751" style="zoom: 67%;" />

<p>从上边实例可以看出：</p>
<ul>
<li><p>**<code>a[i], p[i], *(p+i), *(a+i)四者等价</code>**均可表 示数组元素；</p>
</li>
<li><p>**<code>&amp;a[i], &amp;p[i], p+i, a+i四者等价</code>**均可表示相应数组元素地址；</p>
</li>
</ul>
<table>
    <tr>
        <td align="center" colspan="4">元素表示</td>
        <td align="center" colspan="4">元素地址表示</td>
    </tr>
    <tr>
        <td align="center" colspan="4" style="font-weight: bold; color:red;">a[i] &hArr; p[i] &hArr; *(p+i) &hArr; *(a+i)</td>
        <td align="center" colspan="4" style="font-weight: bold; color:red;">&a[i] &hArr; &p[i] &hArr; p+i &hArr; a+i</td>
    </tr>
    <tr>
        <td align="center">a[0]</td>
        <td align="center">p[0]</td>
        <td align="center">*(p+0)</td>
        <td align="center">*(a+0)</td>
        <td align="center">&a[0]</td>
        <td align="center">&p[0]</td>
        <td align="center">p+0</td>
        <td align="center">a+0</td>
    </tr>
    <tr>
        <td align="center">a[1]</td>
        <td align="center">p[1]</td>
        <td align="center">*(p+1)</td>
        <td align="center">*(a+1)</td>
        <td align="center">&a[1]</td>
        <td align="center">&p[1]</td>
        <td align="center">p+1</td>
        <td align="center">a+1</td>
    </tr>
    <tr>
        <td align="center">a[2]</td>
        <td align="center">p[2]</td>
        <td align="center">*(p+2)</td>
        <td align="center">*(a+2)</td>
        <td align="center">&a[2]</td>
        <td align="center">&p[2]</td>
        <td align="center">p+2</td>
        <td align="center">a+2</td>
    </tr>
</table>

<p>【注意】</p>
<p>&emsp;&emsp;（1）指针变量和数组在访问数组中元素时，一定条件下其使用方法具有相同的形式，因为<strong>指针变量和数组名都是地址量</strong>。</p>
<p>&emsp;&emsp;（2）指针变量和数组的指针（或叫数组名）在<strong>本质上不同</strong>，<strong>指针变量是地址变量</strong>，而<strong>数组的指针是地址常量</strong>。例如<code>p++, p-- (正确); a++, a--(错误)</code>。</p>
<h2 id="2-指针与二维数组"><a href="#2-指针与二维数组" class="headerlink" title="2.指针与二维数组"></a><font size=3>2.指针与二维数组</font></h2><h3 id="2-1列指针遍历二维数组"><a href="#2-1列指针遍历二维数组" class="headerlink" title="2.1列指针遍历二维数组"></a><font size=3>2.1列指针遍历二维数组</font></h3><p>&emsp;&emsp;在<code>C语言中</code>二维数组的元素连续存储，按行优先存储，所以自然可以使用一级指针来进行访问。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[<span class="number">2</span>][<span class="number">3</span>]  = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>&#125;, &#123;<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;&#125;;</span><br><span class="line">    <span class="keyword">int</span> *p = a[<span class="number">0</span>]; <span class="comment">/* 不能直接写 int *p = a;这样类型不匹配，会有警告 */</span></span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>;i &lt; <span class="number">2</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">0</span>;j &lt; <span class="number">3</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;a[%d][%d]=%d,&amp;a[%d][%d]=%p | &quot;</span>,i, j, a[i][j], i, j, &amp;a[i][j]);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;*(p+%d)=%d,p+%d=%p\n&quot;</span>,i * <span class="number">3</span> + j, *(p + i * <span class="number">3</span> + j), i * <span class="number">3</span> + j, p + i * <span class="number">3</span> + j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220204155825156.png" alt="image-20220204155825156" style="zoom: 67%;" />

<p>&emsp;&emsp;从例子中可以看出，一级指针<code>p</code>移动了<code>6</code>个数，到达<code>p + 5</code>时，将<code>a[2][3]</code>中的<code>6</code>个数访问完毕，相当于移动了<code>6</code>列，因此一级指针<code>p</code>也叫作<strong>列指针</strong>。</p>
<p>【注意】<code>int *p= a[0];  /* 列指针的定义法 */</code></p>
<h3 id="2-2行指针遍历二维数组"><a href="#2-2行指针遍历二维数组" class="headerlink" title="2.2行指针遍历二维数组"></a><font size=3>2.2行指针遍历二维数组</font></h3><ul>
<li>行指针的概念</li>
</ul>
<p>&emsp;&emsp;在学习二维数组时，我们就知道二维数组可以看做是多个一维数组，对于<code>a[2][3]</code>来说，有如下表格中理解：</p>
<table>
    <tr>
        <td align="center" colspan="3">行名(代表了地址)</td>
        <td align="center" colspan="3">每行元素</td>
    </tr>
    <tr>
        <td align="center">a</td>
        <td align="center">a[0]</td>
        <td align="center">&a[0][0]</td>
        <td align="center">a[0][0]</td>
        <td align="center">a[0][1]</td>
        <td align="center">a[0][2]</td>
    </tr>
    <tr>
        <td align="center">a + 1</td>
        <td align="center">a[1]</td>
        <td align="center">&a[1][0]</td>
        <td align="center">a[1][0]</td>
        <td align="center">a[1][1]</td>
        <td align="center">a[1][2]</td>
    </tr>
</table>

<p>&emsp;&emsp;在指针与一维数组中我们知道**<code>a[i], p[i], *(p+i), *(a+i)四者等价;&amp;a[i], &amp;p[i], p+i, a+i四者等价</code>**，所以类似的有：</p>
<table>
    <tr>
        <td align="center" colspan="4">行名(代表了地址)</td>
        <td align="center" colspan="3">每行元素地址</td>
    </tr>
    <tr>
        <td align="center">第1行</td>
        <td align="center">a</td>
        <td align="center">a[0] &hArr; *(a + 0)</td>
        <td align="center">&a[0][0]</td>
        <td align="center">a[0][0]</td>
        <td align="center">a[0][1]</td>
        <td align="center">a[0][2]</td>
    </tr>
    <tr>
        <td align="center">第2行</td>
        <td align="center">a + 1</td>
        <td align="center">a[1] &hArr; *(a + 1)</td>
        <td align="center">&a[1][0]</td>
        <td align="center">a[1][0]</td>
        <td align="center">a[1][1]</td>
        <td align="center">a[1][2]</td>
    </tr>
</table>

<p>&emsp;&emsp;所以，第2行第2列的元素就可以表示为:</p>
<table>
    <tr>
        <td align="center">a[1][1] &hArr; *(&a[1][0] + 1) &hArr; *(a[1] + 1) &hArr; *(*(a + 1) + 1)</td>
    </tr>
</table>

<p>&emsp;&emsp;上边的<code>a[0]、a[1]</code>代表了行地址，但是与一维数组名一样，是地址常量。指针变量存储的是地址，那么存储行地址的指针变量，被称之为<strong>行指针</strong>。</p>
<ul>
<li>行指针的定义</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;存储类型&gt; &lt;数据类型&gt; (*&lt;指针变量名&gt;)[表达式] ; </span><br></pre></td></tr></table></figure>

<p>【注意】</p>
<p>（1）存储类型指的是<code>auto, register, static, extern</code>，若省略，则默认为<code>auto</code>。</p>
<p>（2）赋值时要注意定义为行指针的指针变量才可以直接将数组名赋值给指针变量，否则会有警告。</p>
<p>例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a[<span class="number">2</span>][<span class="number">3</span>]; </span><br><span class="line"><span class="keyword">int</span> *q = a;       <span class="comment">/* 会报警告*/</span></span><br><span class="line"><span class="keyword">int</span> (*p)[<span class="number">3</span>] = a;  <span class="comment">/* 正确方式*/</span></span><br></pre></td></tr></table></figure>

<ul>
<li>行指针使用</li>
</ul>
<p>若有<code>int a[2][3]; int (*p) = a; </code>则有</p>
<table>
    <tr>
        <td align="center" style="font-weight: bold; color:red;">a[i][j] &hArr; *(&a[i][0] + j) &hArr; *(a[i] + j) &hArr; *(*(a + i) + j)</td>
    </tr>
    <tr>
        <td align="center" style="font-weight: bold; color:blue;">p[i][j] &hArr; *(&p[i][0] + j) &hArr; *(p[i] + j) &hArr; *(*(p + i) + j)</td>
    </tr>
</table>

<h3 id="2-3行指针与列指针"><a href="#2-3行指针与列指针" class="headerlink" title="2.3行指针与列指针"></a><font size=3>2.3行指针与列指针</font></h3><p>&emsp;&emsp;对于<code>int a[2][3]  = &#123;&#123;0, 1, 2&#125;, &#123;3, 4, 5&#125;&#125;;</code>定义的二维数组有</p>
<table>
    <tr>
        <td align="center">指针类型</td>
        <td align="center">表示形式</td>
        <td align="center">说明</td>
    </tr>
    <tr>
        <td align="center" rowspan="2">行指针</td>
        <td align="center">a 或 a + 0</td>
        <td align="left">指向第0行</td>
    </tr>
    <tr>
        <td align="center">a + 1</td>
        <td align="left">指向第1行</td>
    </tr>
    <tr>
        <td align="center" rowspan="6">列指针</td>
        <td align="center">a[0]</td>
        <td align="left">是一维数组的名称，也是整个数组的首地址。<br>第0行第1个元素(a[0][0])的地址。</td>
    </tr>
    <tr>
        <td align="center">a[0] + 1</td>
        <td align="left">第0行第2个元素(a[0][1])的地址</td>
    </tr>
    <tr>
        <td align="center">a[0] + 2</td>
        <td align="left">第0行第3个元素(a[0][2])的地址</td>
    </tr>
    <tr>
        <td align="center">a[1]</td>
        <td align="left">第1行第1个元素(a[1][0])的地址</td>
    </tr>
    <tr>
        <td align="center">a[1] + 1</td>
        <td align="left">第1行第2个元素(a[1][1])的地址</td>
    </tr>
    <tr>
        <td align="center">a[1] + 2</td>
        <td align="left">第1行第3个元素(a[1][2])的地址</td>
    </tr>
</table>

<p>&emsp;&emsp;可以将<strong>列指针理解为行指针的具体元素，行指针理解为列指针的地址。</strong>那么他们的具体关系就可以这样表示：</p>
<table>
    <tr>
        <td align="center">*行指针 &rArr; 列指针</td>
    </tr>
    <tr>
        <td align="center">&列指针 &rArr; 行指针</td>
    </tr>
</table>

<p>&emsp;&emsp;一般来说我们都是定义行指针，再转换为列指针进而访问数组具体元素，所以这里只写一个行指针转换为列指针的列子，列指针转行指针应该属于一个逆运算，但是意义好像不大，也基本没有遇到过。</p>
<table>
    <tr>
        <td align="center">行指针&rArr;列指针</td>
        <td align="center">列指针等价表示</td>
        <td align="center">指向内容</td>
        <td align="center">指向内容的等价表示</td>
        <td align="center">数组表示</td>
    </tr>
    <tr>
        <td align="center">a &rArr; *a</td>
        <td align="center">a[0]</td>
        <td align="center">*a[0]</td>
        <td align="center">*(*a)</td>
        <td align="center">a[0][0]</td>
    </tr>
    <tr>
        <td align="center">a+1 &rArr; *(a+1)</td>
        <td align="center">a[1]</td>
        <td align="center">*a[1]</td>
        <td align="center">*(*(a+1))</td>
        <td align="center">a[1][0]</td>
    </tr>
</table>
## <font size=3>3.指针数组</font>

<h3 id="3-1指针数组的定义"><a href="#3-1指针数组的定义" class="headerlink" title="3.1指针数组的定义"></a><font size=3>3.1指针数组的定义</font></h3><p>&emsp;&emsp;<strong>指针数组</strong>是指由若干个具有<strong>相同存储类型和数据类型</strong>的<strong>指针变量</strong>构成的<strong>集合</strong>，也就是说这个数组中的每个元素都是同类型的指针变量。</p>
<p>一般声明形式：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;存储类型&gt;  &lt;数据类型&gt;  *&lt;指针数组名&gt;[&lt;指针数组大小&gt;];</span><br></pre></td></tr></table></figure>

<p>【注意】<strong>指针数组名</strong>表示该指针数组的<strong>起始地址</strong>。</p>
<p>例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *pa[<span class="number">2</span>]; <span class="comment">/* 定义了一个长度为 2 的 int 型指针数组*/</span></span><br><span class="line"><span class="keyword">char</span> *pb[<span class="number">6</span>];<span class="comment">/* 定义了一个长度为 6 的 char 型指针数组*/</span></span><br></pre></td></tr></table></figure>

<p>但是其实写成下边这种形式可能会更好理解一些，看个人吧。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> * pa[<span class="number">2</span>]; <span class="comment">/* 定义了一个长度为 2 的 int 型指针数组*/</span></span><br><span class="line"><span class="keyword">char</span> * pb[<span class="number">6</span>];<span class="comment">/* 定义了一个长度为 6 的 char 型指针数组*/</span></span><br></pre></td></tr></table></figure>

<p>可以这样理解，对于<code>int * pa[2];</code>来说，是声明了一个<code>int</code>类型的一维数组<code>pa[2]</code>，它包含了两个元素，每个元素都是一个<code>int</code>类型的指针。</p>
<h3 id="3-2指针数组的初始化"><a href="#3-2指针数组的初始化" class="headerlink" title="3.2指针数组的初始化"></a><font size=3>3.2指针数组的初始化</font></h3><table>
    <tr>
        <td align="center" width=300px>初始化写法</td>
        <td align="center" width=300px>等价写法(赋值)</td>
    </tr>
    <tr>
        <td align="left">int a = 10;<br>
            int b = 20;<br>
            int * p[2] = {&a, &b};</td>
        <td align="left">int a = 10;<br>
            int b = 20;<br>
            int * p[2];<br>
            p[0] = &a;<br>
            p[1] = &b;<br>
        </td>
    </tr>
</table>


<h3 id="3-3指针数组的存储空间"><a href="#3-3指针数组的存储空间" class="headerlink" title="3.3指针数组的存储空间"></a><font size=3>3.3指针数组的存储空间</font></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">int</span> * p[<span class="number">2</span>] = &#123;&amp;a, &amp;b&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;p=%p,&amp;p=%p,&amp;p[0]=%p,&amp;p[1]=%p\n&quot;</span>, p, &amp;p, &amp;p[<span class="number">0</span>],&amp;p[<span class="number">1</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;a=%d,&amp;a=%p,p[0]=%p,*p[0]=%d\n&quot;</span>, a, &amp;a, p[<span class="number">0</span>], *p[<span class="number">0</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;b=%d,&amp;b=%p,p[1]=%p,*p[1]=%d\n&quot;</span>, b, &amp;b, p[<span class="number">1</span>], *p[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220204190231704.png" alt="image-20220204190231704" style="zoom:67%;" />

<p>由程序结果可知变量在内存中存储如下图所示：</p>
<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220204195558425.png" alt="image-20220204195558425" style="zoom: 50%;" />

<p>【注意】图中红色的两个地址之间是有<code>8Byte</code>的空间，类型明明是<code>int</code>，应该是<code>4</code>个字节才对吧，又怎么会这样呢？在介绍指针的的时候说过，<strong>指针变量所占空间是固定的，在<code>32</code>位系统中就是<code>4</code>个字节，而在<code>64</code>位系统中则是<code>8</code>个字节</strong>，由于这里是<code>64</code>位系统，所以指针数组名加<code>1</code>，就会移动<code>8</code>个字节。</p>
<h3 id="3-4指针数组的数组名"><a href="#3-4指针数组的数组名" class="headerlink" title="3.4指针数组的数组名"></a><font size=3>3.4指针数组的数组名</font></h3><p>&emsp;&emsp;对于指针数组的数组名，它代表了指针数组的起始地址。由于数组元素已经是指针了，而数组名又是数组首元素的地址，因此指针数组名就是指针数组中<strong>首个指针元素的地址</strong>，所以指针数组名是一个<strong>多级指针</strong>，具体来说就是一个二级指针。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">int</span> * p[<span class="number">2</span>] = &#123;&amp;a, &amp;b&#125;;</span><br><span class="line">    <span class="keyword">int</span> * *q;</span><br><span class="line"></span><br><span class="line">    q = p;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;sizeof(p)=%ld,sizeof(q)=%ld\n&quot;</span>,<span class="keyword">sizeof</span>(p), <span class="keyword">sizeof</span>(q));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;q=%p,&amp;q=%p,&amp;q[0]=%p,&amp;q[1]=%p\n&quot;</span>, q, &amp;q, &amp;p[<span class="number">0</span>],&amp;q[<span class="number">1</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;p=%p,&amp;p=%p,&amp;p[0]=%p,&amp;p[1]=%p\n&quot;</span>, p, &amp;p, &amp;p[<span class="number">0</span>],&amp;p[<span class="number">1</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;a=%d,&amp;a=%p,p[0]=%p,*p[0]=%d,**p=%d\n&quot;</span>, a, &amp;a, p[<span class="number">0</span>], *p[<span class="number">0</span>], **p);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;b=%d,&amp;b=%p,p[1]=%p,*p[1]=%d,**(p+1)=%d\n&quot;</span>, b, &amp;b, p[<span class="number">1</span>], *p[<span class="number">1</span>], **(p+<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220204203431783.png" alt="image-20220204203431783" style="zoom:67%;" />

<p>【注意】</p>
<p>&emsp;&emsp;（1）从另一个方面理解，在一维数组中我们知道**<code>a[i], p[i], *(p+i), *(a+i)四者等价</code>**，所以直接将<code> p[i]替换为*(p+i)</code>那么也可以得到上边的结果。</p>
<p>&emsp;&emsp;（2）通过<code>sizeof(指针数组名)</code>可以求得指针数组占据的总空间，而每个元素所占空间与系统相关。</p>
<h3 id="3-5指针数组与二维数组"><a href="#3-5指针数组与二维数组" class="headerlink" title="3.5指针数组与二维数组"></a><font size=3>3.5指针数组与二维数组</font></h3><p>&emsp;&emsp;考虑到二维数组可以通过行指针来访问，这样的话通过指针数组来存储二维数组的行指针，那么这样就可以通过指针数组遍历二维数组了。</p>
<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220204204857551.png" alt="image-20220204204857551" style="zoom:67%;" />

<ul>
<li>通过指针数组遍历二维数组</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a [<span class="number">2</span>][<span class="number">3</span>] = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>&#125;, &#123;<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;&#125;;</span><br><span class="line">    <span class="keyword">int</span> * p[<span class="number">2</span>] = &#123;a[<span class="number">0</span>], a[<span class="number">1</span>]&#125;;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;a[%d][%d]=%d,p[%d][%d]=%d,&quot;</span>, i, j, a[i][j], i, j, p[i][j]);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;*(p[%d] + %d)=%d,*(*(p + %d) + %d)=%d\n&quot;</span>, i, j, *(p[i] + j), i, j, *(*(p + i) + j));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220204210115901.png" alt="image-20220204210115901" style="zoom:67%;" />

<h1 id="三、指针与字符串"><a href="#三、指针与字符串" class="headerlink" title="三、指针与字符串"></a><font size=3>三、指针与字符串</font></h1><h2 id="1-字符指针变量的概念"><a href="#1-字符指针变量的概念" class="headerlink" title="1.字符指针变量的概念"></a><font size=3>1.字符指针变量的概念</font></h2><p>&emsp;&emsp;<code>C语言</code>通过使用字符数 组来处理字符串，<code>char</code>数据类型的指针变量称为<strong>字符指针变量</strong>。字符指针变量与字符数组有着密切关系，它也被用来处理字符串。</p>
<h2 id="2-字符指针变量的赋值"><a href="#2-字符指针变量的赋值" class="headerlink" title="2.字符指针变量的赋值"></a><font size=3>2.字符指针变量的赋值</font></h2><ul>
<li>指向字符数组</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> str[] = <span class="string">&quot;strings&quot;</span>;</span><br><span class="line"><span class="keyword">char</span> *p = str;</span><br></pre></td></tr></table></figure>

<p>&emsp;&emsp;这样的赋值方式是将字符指针变量<code>p</code>指向数组<code>str</code>的首地址，即将字符串的首地址赋予指针，并不是把该字符串复制到指针中。</p>
<ul>
<li>指向字符串常量</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> *p = <span class="string">&quot;string&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>&emsp;&emsp;这样的赋值方式是将一个<strong>字符串常量</strong>的首地址赋给指针变量<code>p</code>，这样的赋值方式会使指针指向对象的值不能被修改，例如<code>*p =  &#39;S&#39;;</code>这将导致程序报错，原因就在于字符串常量不能被修改。</p>
<h1 id="四、多级指针"><a href="#四、多级指针" class="headerlink" title="四、多级指针"></a><font size=3>四、多级指针</font></h1><h2 id="1-多级指针的概念"><a href="#1-多级指针的概念" class="headerlink" title="1.多级指针的概念"></a><font size=3>1.多级指针的概念</font></h2><p>&emsp;&emsp;把一个<strong>指向指针变量</strong>的<strong>指针变量</strong>，称为多级指针变量。</p>
<p>&emsp;&emsp;对于<strong>指向处理数据</strong>的<strong>指针变量</strong>称为一级指针变量，简称一级指针。</p>
<p>&emsp;&emsp;把<strong>指向一级指针变量</strong>的<strong>指针变量</strong>称为二级指针变量，简称二级指针。</p>
<h2 id="2-二-多-级指针的声明"><a href="#2-二-多-级指针的声明" class="headerlink" title="2.二(多)级指针的声明"></a><font size=3>2.二(多)级指针的声明</font></h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;存储类型&gt; &lt;数据类型&gt; ** &lt;指针名&gt;; <span class="comment">/* 几级指针就写几个* 号*/</span></span><br></pre></td></tr></table></figure>

<p>【注意】</p>
<p>（1）指针变量也是一种变量，也会占用存储空间，也可以使用<code>&amp;</code>获取它的地址。</p>
<p>（2）<code>C语言</code>不限制指针的级数，**每增加一级指针，在定义指针变量时就得增加一个星号<code>*</code>**。实际开发中会经常使用一级指针和二级指针，几乎用不到高级指针。</p>
<p>例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">10</span>;  <span class="comment">/* 定义了一个整型变量 a */</span></span><br><span class="line"><span class="keyword">int</span> *p1;     <span class="comment">/* 定义了一个一级整型指针变量 p1 */</span></span><br><span class="line"><span class="keyword">int</span> **p2;    <span class="comment">/* 定义了一个二级整型指针变量 p2 */</span></span><br><span class="line"><span class="keyword">int</span> ***p3;   <span class="comment">/* 定义了一个三级整型指针变量 p3 */</span></span><br><span class="line"><span class="keyword">int</span> ****p4;  <span class="comment">/* 定义了一个四级整型指针变量 p4 */</span></span><br></pre></td></tr></table></figure>

<h2 id="3-二-多-级指针的初始化"><a href="#3-二-多-级指针的初始化" class="headerlink" title="3.二(多)级指针的初始化"></a><font size=3>3.二(多)级指针的初始化</font></h2><table>
    <tr>
        <td align="center" width=300px>初始化写法</td>
        <td align="center" width=300px>等价写法(赋值)</td>
    </tr>
    <tr>
        <td align="left">
            int a = 10;<br>
            int *p1 = &a;<br>
            int **p2 = &p1;<br>
            int ***p3 = &p2;<br>
            int ****p4 = &p3;
        </td>
        <td align="left">
            int a = 10;<br>
            int *p1;<br>
            int **p2;<br>
            int ***p3;<br>
            int ****p4;<br>
            p1 = &a;<br>
            p2 = &p2;<br>
            p3 = &p3;<br>
            p4 = &p4;<br>
        </td>
    </tr>
</table>

<p>【注意】指针变量的初始化或者赋值，后边一定要是<strong>地址</strong>。</p>
<p>【说明】</p>
<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220206154923623.png" alt="image-20220206154923623" style="zoom:50%;" />

<p>&emsp;&emsp;上边初始化的部分，定义了一个整型变量<code>a</code>，然后定义了一个一级指针变量<code>p1</code>，指针变量<code>p1</code>中存放的数据是整型变量<code>a</code>的地址；又定义了一个二级指针变量<code>p2</code>，<code>p2</code>中存放的是<code>p1</code>的地址；又定义了一个指针变量<code>p3</code>，里边存放的是<code>p2</code>的地址；再后面又定义了一个四级指针变量<code>p4</code>，里边存放的是<code>p3</code>的地址。</p>
<h2 id="4-二-多-级指针的引用"><a href="#4-二-多-级指针的引用" class="headerlink" title="4.二(多)级指针的引用"></a><font size=3>4.二(多)级指针的引用</font></h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">** &lt;指针名&gt;; <span class="comment">/* 几级指针就写几个* 号*/</span></span><br></pre></td></tr></table></figure>

<p>&emsp;&emsp;通过上一节的多级指针初始化的分析可知，多级指针存放的都是地址，而<code>*</code>号可以取出地址中的数据，详细的使用情况可看下一节多级指针的存储空间的介绍。</p>
<h2 id="5-多级指针的存储空间"><a href="#5-多级指针的存储空间" class="headerlink" title="5.多级指针的存储空间"></a><font size=3>5.多级指针的存储空间</font></h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> *p1 = &amp;a;</span><br><span class="line">    <span class="keyword">int</span> **p2 = &amp;p1;</span><br><span class="line">    <span class="keyword">int</span> ***p3 = &amp;p2;</span><br><span class="line">    <span class="keyword">int</span> ****p4 = &amp;p3;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;a=%d,&amp;a=%p\n&quot;</span>, a, &amp;a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;*p1=%d,p1=%p,&amp;p1=%p\n&quot;</span>, *p1, p1, &amp;p1);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;**p2=%d,*p2=%p,p2=%p,&amp;p2=%p\n&quot;</span>, **p2, *p2, p2, &amp;p2);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;***p3=%d,**p3=%p,*p3=%p,p3=%p,&amp;p3=%p\n&quot;</span>, ***p3, **p3, *p3, p3, &amp;p3);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;****p4=%d,***p4=%p,**p4=%p,*p4=%p,p4=%p,&amp;p4=%p\n&quot;</span>, ****p4, ***p4, **p4, *p4, p4, &amp;p4);</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220206165514337.png" alt="image-20220206165514337" style="zoom:67%;" />

<p>由上图分析可得各级指针在内存中情况如下：</p>
<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220206172020146.png" alt="image-20220206172020146" style="zoom:67%;" />

<p>【注意】</p>
<p>&emsp;&emsp;（1）相邻红色的地址编号相差都为<code>8</code>，这是因为二级、三级和四级指针中存储的都是指针变量，而在<code>64</code>位系统中指针变量所占空间为<code>8</code>个字节，所以就出现了上边的情况。</p>
<p>&emsp;&emsp;（2）<code>*</code>号是自右向左结合，所以引用多级指针的时候的时候可以这样理解：<br>$$<br>\begin{flalign}<br>****p4 = ***(*p4) = ***p3 = **(*p3) = **p2 = *(*p2) = *p1 = 10 \<br>***p3 = **(*p3) = **p2 = *(*p2) = *p1 = 10 \<br>**p2 = *(*p2) = *p1 = 10 \<br>*p1 = 10<br>\end{flalign}<br>$$</p>
<h2 id="6-多级指针的运算"><a href="#6-多级指针的运算" class="headerlink" title="6.多级指针的运算"></a><font size=3>6.多级指针的运算</font></h2><p>&emsp;&emsp;总的来说，多级指针也是指针，符合一级指针的运算规则。指针变量加1，是向地址大的方向移动一个目标数据。类似，多级指针运算也是以其<strong>目标变量</strong>为单位进行偏移。</p>
<p>比如，<code>int **p;p++;</code>移动一个<code>int *</code>变量所占的内存空间。再比如<code>int ***p;p++</code>移动一个<code>int **</code>所占的内存空间。</p>
<p>&emsp;&emsp;其实多级指针中存放的都是指针变量，除了一级指针，多级指针移动时，移动的都是一个指针变量的大小，在<code>32</code>位系统中是<code>4</code>个字节，在<code>64</code>位系统中是<code>8</code>个字节。</p>
<h1 id="五、函数指针"><a href="#五、函数指针" class="headerlink" title="五、函数指针"></a><font size=3>五、函数指针</font></h1><p>&emsp;&emsp;为了汇总，这里需要使用函数的概念，函数的详情可以看下一章。</p>
<h2 id="1-函数指针的定义"><a href="#1-函数指针的定义" class="headerlink" title="1.函数指针的定义"></a><font size=3>1.函数指针的定义</font></h2><p>&emsp;&emsp;如果在程序中定义了一个函数，那么在编译时系统就会为这个函数代码<strong>分配一段存储空间，这段存储空间的首地址称为这个函数的地址</strong>。<strong>函数名表示的就是这个地址</strong>。通过指针的概念，我们知道既然是地址，那么就可以定义一个指针变量来存放，这个<strong>指针变量</strong>就叫作函数指针变量，简称<strong>函数指针</strong>。</p>
<h2 id="2-函数指针的声明"><a href="#2-函数指针的声明" class="headerlink" title="2.函数指针的声明"></a><font size=3>2.函数指针的声明</font></h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;数据类型&gt; (*&lt;函数指针名称&gt;) (&lt;参数说明列表&gt;);</span><br></pre></td></tr></table></figure>

<table>
    <tr>
        <td align="center" width=200px>数据类型</td>
        <td align="left">函数指针所指向的函数的返回值类型
</td>
    </tr>
    <tr>
        <td align="center" width=200px>（*<函数指针名称>）</td>
        <td align="left">*说明为指针()不可缺省，表明为函数的指针
</td>
    </tr>
    <tr>
        <td align="center" width=200px>参数说明列表</td>
        <td align="left">应该与函数指针所指向的函数的形参说明保持一致
</td>
    </tr>
</table>

<p>【注意】<strong>指向函数的指针变量没有 <code>++</code> 和 <code>--</code> 运算</strong>。</p>
<p>例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> (*p)(<span class="keyword">int</span>, <span class="keyword">int</span>);</span><br></pre></td></tr></table></figure>

<p>这个语句定义了一个指向函数的指针变量 <code>p</code>:</p>
<p>&emsp;&emsp;（1）它是一个<strong>指针变量</strong>，所以要有一个<code>*</code>，即（<code>*p</code>）；</p>
<p>&emsp;&emsp;（2）前面的 <code>int</code> 表示这个指针变量可以<strong>指向返回值类型为 <code>int</code> 型的函数</strong>；</p>
<p>&emsp;&emsp;（3）括号中的两个 <code>int</code> 表示这个指针变量可以<strong>指向有两个参数且都是 <code>int</code> 型的函数</strong>。</p>
<p>所以总体来说，这个语句的意思就是：定义了一个指针变量 <code>p</code>，该指针变量可以指向返回值类型为<code>int</code>型，且有两个整型参数的函数。<code>p</code> 的类型为 <code>int (*)(int，int)</code>。</p>
<h2 id="3-函数指针的使用"><a href="#3-函数指针的使用" class="headerlink" title="3.函数指针的使用"></a><font size=3>3.函数指针的使用</font></h2><h3 id="3-1函数指针初始化"><a href="#3-1函数指针初始化" class="headerlink" title="3.1函数指针初始化"></a><font size=3>3.1函数指针初始化</font></h3><p>前边需要有一个函数的声明：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>; <span class="comment">/* 函数声明 */</span></span><br></pre></td></tr></table></figure>

<table>
    <tr>
        <td align="center" width=300px>初始化写法</td>
        <td align="center" width=300px>等价写法(赋值)</td>
    </tr>
    <tr>
        <td align="left">
            int (*p)(int, int) = sum;
        </td>
        <td align="left">
            int (*p)(int, int);<br>
            p = sum;
        </td>
    </tr>
</table>

<h3 id="3-2函数指针的调用"><a href="#3-2函数指针的调用" class="headerlink" title="3.2函数指针的调用"></a><font size=3>3.2函数指针的调用</font></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ &lt;变量名&gt; = ] (*&lt;函数指针名称&gt;)(&lt;实际传入参数说明列表&gt;);</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 提前定义的函数 */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>; <span class="comment">/* 函数声明 */</span></span><br><span class="line"><span class="comment">/* --------------------------------------------------  */</span></span><br><span class="line"><span class="comment">/* 主程序中函数指针的操作 */</span></span><br><span class="line"><span class="keyword">int</span> (*p)(<span class="keyword">int</span>, <span class="keyword">int</span>) = sum;  <span class="comment">/* 定义一个函数指针 */</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;a=%d,b=%d,(*p)(a, b)=%d\n&quot;</span>, a, b, (*p)(a, b));</span><br><span class="line"></span><br><span class="line"><span class="comment">/* --------------------------------------------------  */</span></span><br><span class="line"><span class="comment">/* 或者 */</span></span><br><span class="line"><span class="keyword">int</span> c = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> (*p)(<span class="keyword">int</span>, <span class="keyword">int</span>) = sum;  <span class="comment">/* 定义一个函数指针 */</span></span><br><span class="line">c = (*p)(a, b);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;a=%d,b=%d,c=%d\n&quot;</span>, a, b, c);</span><br></pre></td></tr></table></figure>

<h2 id="4-函数指针的存储空间"><a href="#4-函数指针的存储空间" class="headerlink" title="4.函数指针的存储空间"></a><font size=3>4.函数指针的存储空间</font></h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>; <span class="comment">/* 函数声明 */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">int</span> b = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> c = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> (*p)(<span class="keyword">int</span>, <span class="keyword">int</span>) = sum;  <span class="comment">/* 定义一个函数指针 */</span></span><br><span class="line">    c = (*p)(a, b);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;a=%d,b=%d,c=%d\n&quot;</span>, a, b, c);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;&amp;a=%p,&amp;b=%p,&amp;c=%p\n&quot;</span>, &amp;a, &amp;b,&amp;c);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;&amp;sum=%p,p=%p,&amp;p=%p\n&quot;</span>, sum, p, &amp;p);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (a + b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220207104831017.png" alt="image-20220207104831017" style="zoom:67%;" />

<p>由上图分析可以得到函数和函数指针在内存中的分布如下图：</p>
<img src="https://fanhua-picture.oss-cn-hangzhou.aliyuncs.com/Linux/LV1-06-C-Language/image-20220207105826214.png" alt="image-20220207105826214" style="zoom:50%;" />

<h2 id="5-函数指针数组"><a href="#5-函数指针数组" class="headerlink" title="5.函数指针数组"></a><font size=3>5.函数指针数组</font></h2><ul>
<li>定义</li>
</ul>
<p>&emsp;&emsp;函数指针数组是一个保存若干个函数名的数组，一般形式如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;数据类型&gt; (*&lt;函数指针数组名称&gt; [&lt;大小&gt;] )(&lt;参数说明列表&gt; );</span><br></pre></td></tr></table></figure>

<p>其中，&lt;大小&gt;是指函数指针数组元数的个数，其它同普通的函数指针。</p>
<p>例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> (*pFunction[<span class="number">3</span>])(<span class="keyword">int</span>, <span class="keyword">int</span>);</span><br></pre></td></tr></table></figure>

<p>以上语句定义了一个指针数组 <code>pFunction</code>，该指针数组的元素都是<code>int</code>型函数指针，可以指向返回值类型为<code>int</code>型，且有两个整型参数的函数。</p>
<ul>
<li>使用</li>
</ul>
<p>与指针数组一致，这里不再详述。</p>
<h1 id="六、指针定义总结"><a href="#六、指针定义总结" class="headerlink" title="六、指针定义总结"></a><font size=3>六、指针定义总结</font></h1><h2 id="int-p"><a href="#int-p" class="headerlink" title="int p;"></a><font size=3><code>int p;</code></font></h2><p>&emsp;&emsp;这是一个普通的整型变量</p>
<h2 id="int-p-1"><a href="#int-p-1" class="headerlink" title="int *p;"></a><font size=3><code>int *p;</code></font></h2><p>&emsp;&emsp;首先从 <code>p</code> 处开始，先与 <code>*</code> 结合，所以说明<code> p</code> 是一个指针, 然后再与<code>int</code> 结合, 说明指针所指向的内容的类型为 <code>int</code> 型。所以 <code>p</code> 是一个<strong>返回整型数据的指针</strong>。</p>
<h2 id="int-p-2"><a href="#int-p-2" class="headerlink" title="int **p;"></a><font size=3><code>int **p;</code></font></h2><p>&emsp;&emsp;首先从 <code>p</code> 开始, 先与 <code>*</code> 结合, 说是 <code>p </code>是一个指针, 然后再与 <code>* </code>结合, 说明指针所指向的元素是指针, 然后再与 <code>int</code> 结合, 说明该指针所指向的元素是整型数据，所以<code>p</code>是一个<strong>二级指针，指向整型数据</strong>。</p>
<h2 id="int-p-3"><a href="#int-p-3" class="headerlink" title="int p[3];"></a><font size=3><code>int p[3];</code></font></h2><p>&emsp;&emsp;首先从 <code>p</code> 处开始，先与 <code>[] </code>结合，说明 <code>p</code> 是一个数组, 然后与 <code>int</code> 结合, 说明数组里的元素是整型的, 所以 <code>p</code> 是一个由整型数据组成的<strong>数组</strong>。</p>
<h2 id="int-p-3-1"><a href="#int-p-3-1" class="headerlink" title="int *p[3];"></a><font size=3><code>int *p[3];</code></font></h2><p>&emsp;&emsp;首先从 <code>p</code> 处开始, 先与<code>[]</code>结合，因为其优先级比<code> *</code> 高,所以<code>p</code>是一个数组, 然后再与<code>*</code>结合, 说明数组里的元素是指针类型, 然后再与 int 结合, 说明指针所指向的内容的类型是整型的, 所以 <code>p </code>是一个由<strong>返回整型数据的指针所组成的数组</strong>。</p>
<h2 id="int-p-3-2"><a href="#int-p-3-2" class="headerlink" title="int (*p)[3];"></a><font size=3><code>int (*p)[3];</code></font></h2><p>&emsp;&emsp;首先从 <code>p</code> 处开始, 先与 <code>*</code> 结合,说明 <code>p</code> 是一个指针然后再与<code> []</code> 结合(与”()”这步可以忽略,只是为了改变优先级), 说明指针所指向的内容是一个数组, 然后再与<code>int</code> 结合, 说明数组里的元素是整型的。所以<code>p</code>是一个<strong>指向由整型数据组成的数组的指针</strong>。</p>
<h2 id="int-p-int"><a href="#int-p-int" class="headerlink" title="int p(int);"></a><font size=3><code>int p(int);</code></font></h2><p>&emsp;&emsp;从 <code>p</code> 处起,先与 <code>() </code>结合, 说明 <code>p</code> 是一个函数, 然后进入<code>()</code>里分析, 说明该函数有一个整型变量的参数, 然后再与外面的<code> int</code> 结合, 说明<strong>函数的返回值是一个整型数据</strong>。</p>
<h2 id="int-p-int-1"><a href="#int-p-int-1" class="headerlink" title="int (*p)(int);"></a><font size=3><code>int (*p)(int);</code></font></h2><p>&emsp;&emsp;从 <code>p </code>处开始, 先与指针结合, 说明<code>p</code>是一个指针, 然后与<code>()</code>结合, 说明指针指向的是一个函数, 然后再与<code>()</code>里的<code>int</code>结合, 说明函数有一个<code>int</code> 型的参数, 再与最外层的 int 结合, 说明函数的返回类型是整型, 所以<code>p</code>是一个<strong>指向有一个整型参数且返回类型为整型的函数的指针</strong>。</p>
<h2 id="int-p-3-int-int"><a href="#int-p-3-int-int" class="headerlink" title="int (*p[3])(int, int);"></a><font size=3><code>int (*p[3])(int, int);</code></font></h2><p>&emsp;&emsp;首先从<code> p</code> 处开始, 先与 <code>[] </code>结合，因为其优先级比 <code>*</code> 高,所以 <code>p</code> 是一个数组,然后再与 <code>* </code>结合, 说明数组里的元素是指针类型,然后与<code>()</code>结合, 说明指针指向的是一个函数, 然后再与<code>()</code>里的<code>int</code>结合, 说明函数有两个<code>int </code>型的参数, 再与最外层的 <code>int </code>结合, 说明函数的返回类型是整型, 所以 <code>p</code> 是一个指向有两个整型参数且返回类型为整型的<strong>函数的指针数组</strong>。</p>
<h2 id="int-p-int-3"><a href="#int-p-int-3" class="headerlink" title="int *(*p(int))[3];"></a><font size=3><code>int *(*p(int))[3];</code></font></h2><p>&emsp;&emsp;从 <code>p</code> 开始,先与 <code>()</code> 结合, 说明 <code>p</code> 是一个函数, 然后进入 <code>()</code> 里面, 与<code> int</code> 结合, 说明函数有一个整型变量参数, 然后再与外面的<code>*</code>结合, 说明函数返回的是一个指针, 然后到最外面一层, 先与<code>[]</code>结合, 说明返回的指针指向的是一个数组, 然后再与<code>*</code>结合, 说明数组里的元素是指针, 然后再与<code>int</code>结合, 说明指针指向的内容是整型数据。所以<code>p</code>是一个<strong>参数为一个整数据且返回一个指向由整型指针变量组成的数组的指针变量的函数</strong>。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">qidaink</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://qidaink-vercel-pages.vercel.app/post/84847102.html">https://qidaink-vercel-pages.vercel.app/post/84847102.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://qidaink-vercel-pages.vercel.app" target="_blank">云与海</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/C/">C</a></div><div class="post_share"><div class="social-share" data-image="/images/dafault-img.jpg" data-sites="wechat,qq,weibo"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/images/myqq.jpg" target="_blank"><img class="post-qr-code-img" src="/images/myqq.jpg" alt="我的QQ"/></a><div class="post-qr-code-desc">我的QQ</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/e0f393dc.html"><img class="prev-cover" src="/images/dafault-img.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">【Shell】LV2-03-Shell脚本编程</div></div></a></div><div class="next-post pull-right"><a href="/post/582937ae.html"><img class="next-cover" src="/images/dafault-img.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">【C】LV1-05-C语言-5数组与字符串</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/post/e8ba6a9c.html" title="【C】LV1-01-C语言-1数据类型"><img class="cover" src="/images/dafault-img.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-10</div><div class="title">【C】LV1-01-C语言-1数据类型</div></div></a></div><div><a href="/post/ce2c2639.html" title="【C】LV1-02-C语言-2变量与运算符"><img class="cover" src="/images/dafault-img.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-11</div><div class="title">【C】LV1-02-C语言-2变量与运算符</div></div></a></div><div><a href="/post/d7b81674.html" title="【C】LV1-04-C语言-4控制语句"><img class="cover" src="/images/dafault-img.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-13</div><div class="title">【C】LV1-04-C语言-4控制语句</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Waline</span><span class="switch-btn"></span><span class="second-comment">Twikoo</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/images/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">qidaink</div><div class="author-info__description">但愿人长久，千里共婵娟</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">24</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/qidaink"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/qidaink" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://blog.csdn.net/qq_38231279" target="_blank" title="CSDN"><i class="fas fa-copyright"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来到云与海的博客！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%8C%87%E9%92%88"><span class="toc-text">一、指针</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E6%8C%87%E9%92%88%EF%BC%9F"><span class="toc-text">1.什么是指针？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%B8%80%E5%88%87%E7%9A%86%E5%9C%B0%E5%9D%80%EF%BC%9F"><span class="toc-text">2.一切皆地址？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8%E6%8C%87%E9%92%88%EF%BC%9F"><span class="toc-text">3.为什么要用指针？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%80%8E%E4%B9%88%E4%BD%BF%E7%94%A8%E6%8C%87%E9%92%88%EF%BC%9F"><span class="toc-text">4.怎么使用指针？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E6%8C%87%E9%92%88%E5%8F%98%E9%87%8F%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-text">4.1指针变量的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2%E6%8C%87%E9%92%88%E5%8F%98%E9%87%8F%E7%9A%84%E8%B5%8B%E5%80%BC"><span class="toc-text">4.2指针变量的赋值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3%E6%8C%87%E9%92%88%E5%8F%98%E9%87%8F%E7%9A%84%E5%BC%95%E7%94%A8"><span class="toc-text">4.3指针变量的引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4%E6%8C%87%E9%92%88%E5%92%8C%E5%8F%98%E9%87%8F%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E5%AD%98%E6%94%BE"><span class="toc-text">4.4指针和变量在内存中的存放</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%8C%87%E9%92%88%E5%8D%A0%E5%87%A0%E4%B8%AA%E5%AD%97%E8%8A%82%EF%BC%9F"><span class="toc-text">5.指针占几个字节？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%8C%87%E9%92%88%E7%9A%84%E8%BF%90%E7%AE%97"><span class="toc-text">6.指针的运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1%E6%8C%87%E9%92%88%E7%9A%84%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97"><span class="toc-text">6.1指针的赋值运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2%E6%8C%87%E9%92%88%E7%9A%84%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97"><span class="toc-text">6.2指针的算术运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3%E6%8C%87%E9%92%88%E7%9A%84%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97"><span class="toc-text">6.3指针的关系运算</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-void%E6%8C%87%E9%92%88"><span class="toc-text">7.void指针</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1void%E6%8C%87%E9%92%88%E6%A6%82%E5%BF%B5"><span class="toc-text">7.1void指针概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2%E4%B8%80%E8%88%AC%E5%BD%A2%E5%BC%8F"><span class="toc-text">7.2一般形式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99"><span class="toc-text">7.3使用规则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-const%E6%8C%87%E9%92%88"><span class="toc-text">8.const指针</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1const%E5%8F%98%E9%87%8F"><span class="toc-text">8.1const变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2%E5%B8%B8%E9%87%8F%E5%8C%96%E6%8C%87%E9%92%88%E7%9B%AE%E6%A0%87%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">8.2常量化指针目标表达式 </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3%E5%B8%B8%E9%87%8F%E5%8C%96%E6%8C%87%E9%92%88%E5%8F%98%E9%87%8F"><span class="toc-text">8.3常量化指针变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4%E5%B8%B8%E9%87%8F%E5%8C%96%E6%8C%87%E9%92%88%E5%8F%98%E9%87%8F%E5%8F%8A%E5%85%B6%E7%9B%AE%E6%A0%87%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">8.4常量化指针变量及其目标表达式  </span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%8C%87%E9%92%88%E4%B8%8E%E6%95%B0%E7%BB%84"><span class="toc-text">二、指针与数组</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%8C%87%E9%92%88%E4%B8%8E%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-text">1.指针与一维数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E6%95%B0%E7%BB%84%E7%9A%84%E6%8C%87%E9%92%88"><span class="toc-text">1.1数组的指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0%E7%9A%84%E8%A1%A8%E7%A4%BA"><span class="toc-text">1.2数组元素的表示</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%8C%87%E9%92%88%E4%B8%8E%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-text">2.指针与二维数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E5%88%97%E6%8C%87%E9%92%88%E9%81%8D%E5%8E%86%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-text">2.1列指针遍历二维数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E8%A1%8C%E6%8C%87%E9%92%88%E9%81%8D%E5%8E%86%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-text">2.2行指针遍历二维数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3%E8%A1%8C%E6%8C%87%E9%92%88%E4%B8%8E%E5%88%97%E6%8C%87%E9%92%88"><span class="toc-text">2.3行指针与列指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-text">3.1指针数组的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">3.2指针数组的初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84%E7%9A%84%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4"><span class="toc-text">3.3指针数组的存储空间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84%E7%9A%84%E6%95%B0%E7%BB%84%E5%90%8D"><span class="toc-text">3.4指针数组的数组名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84%E4%B8%8E%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-text">3.5指针数组与二维数组</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%8C%87%E9%92%88%E4%B8%8E%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">三、指针与字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%AD%97%E7%AC%A6%E6%8C%87%E9%92%88%E5%8F%98%E9%87%8F%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-text">1.字符指针变量的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%AD%97%E7%AC%A6%E6%8C%87%E9%92%88%E5%8F%98%E9%87%8F%E7%9A%84%E8%B5%8B%E5%80%BC"><span class="toc-text">2.字符指针变量的赋值</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%A4%9A%E7%BA%A7%E6%8C%87%E9%92%88"><span class="toc-text">四、多级指针</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%A4%9A%E7%BA%A7%E6%8C%87%E9%92%88%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-text">1.多级指针的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BA%8C-%E5%A4%9A-%E7%BA%A7%E6%8C%87%E9%92%88%E7%9A%84%E5%A3%B0%E6%98%8E"><span class="toc-text">2.二(多)级指针的声明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%BA%8C-%E5%A4%9A-%E7%BA%A7%E6%8C%87%E9%92%88%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">3.二(多)级指针的初始化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E4%BA%8C-%E5%A4%9A-%E7%BA%A7%E6%8C%87%E9%92%88%E7%9A%84%E5%BC%95%E7%94%A8"><span class="toc-text">4.二(多)级指针的引用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%A4%9A%E7%BA%A7%E6%8C%87%E9%92%88%E7%9A%84%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4"><span class="toc-text">5.多级指针的存储空间</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%A4%9A%E7%BA%A7%E6%8C%87%E9%92%88%E7%9A%84%E8%BF%90%E7%AE%97"><span class="toc-text">6.多级指针的运算</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88"><span class="toc-text">五、函数指针</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-text">1.函数指针的定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E7%9A%84%E5%A3%B0%E6%98%8E"><span class="toc-text">2.函数指针的声明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">3.函数指针的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">3.1函数指针初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E7%9A%84%E8%B0%83%E7%94%A8"><span class="toc-text">3.2函数指针的调用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E7%9A%84%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4"><span class="toc-text">4.函数指针的存储空间</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84"><span class="toc-text">5.函数指针数组</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%8C%87%E9%92%88%E5%AE%9A%E4%B9%89%E6%80%BB%E7%BB%93"><span class="toc-text">六、指针定义总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#int-p"><span class="toc-text">int p;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#int-p-1"><span class="toc-text">int *p;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#int-p-2"><span class="toc-text">int **p;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#int-p-3"><span class="toc-text">int p[3];</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#int-p-3-1"><span class="toc-text">int *p[3];</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#int-p-3-2"><span class="toc-text">int (*p)[3];</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#int-p-int"><span class="toc-text">int p(int);</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#int-p-int-1"><span class="toc-text">int (*p)(int);</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#int-p-3-int-int"><span class="toc-text">int (*p[3])(int, int);</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#int-p-int-3"><span class="toc-text">int *(*p(int))[3];</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/9720d703.html" title="【Shell】Shell命令-sed"><img src="/images/dafault-img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【Shell】Shell命令-sed"/></a><div class="content"><a class="title" href="/post/9720d703.html" title="【Shell】Shell命令-sed">【Shell】Shell命令-sed</a><time datetime="2022-02-21T00:22:02.000Z" title="发表于 2022-02-21 08:22:02">2022-02-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/4bc18fdf.html" title="【Ubuntu】PPA介绍"><img src="/images/dafault-img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【Ubuntu】PPA介绍"/></a><div class="content"><a class="title" href="/post/4bc18fdf.html" title="【Ubuntu】PPA介绍">【Ubuntu】PPA介绍</a><time datetime="2022-02-19T08:29:55.000Z" title="发表于 2022-02-19 16:29:55">2022-02-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/e0f393dc.html" title="【Shell】LV2-03-Shell脚本编程"><img src="/images/dafault-img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【Shell】LV2-03-Shell脚本编程"/></a><div class="content"><a class="title" href="/post/e0f393dc.html" title="【Shell】LV2-03-Shell脚本编程">【Shell】LV2-03-Shell脚本编程</a><time datetime="2022-02-18T00:22:02.000Z" title="发表于 2022-02-18 08:22:02">2022-02-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/84847102.html" title="【C】LV1-06-C语言-6指针"><img src="/images/dafault-img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【C】LV1-06-C语言-6指针"/></a><div class="content"><a class="title" href="/post/84847102.html" title="【C】LV1-06-C语言-6指针">【C】LV1-06-C语言-6指针</a><time datetime="2022-01-15T08:29:55.000Z" title="发表于 2022-01-15 16:29:55">2022-01-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/582937ae.html" title="【C】LV1-05-C语言-5数组与字符串"><img src="/images/dafault-img.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【C】LV1-05-C语言-5数组与字符串"/></a><div class="content"><a class="title" href="/post/582937ae.html" title="【C】LV1-05-C语言-5数组与字符串">【C】LV1-05-C语言-5数组与字符串</a><time datetime="2022-01-14T08:29:55.000Z" title="发表于 2022-01-14 16:29:55">2022-01-14</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2017 - 2022 By qidaink</div><div class="footer_custom_text">但愿人长久，千里共婵娟！</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    loader: {
      source: {
        '[tex]/amsCd': '[tex]/amscd'
      }
    },
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        addClass: [200,() => {
          document.querySelectorAll('mjx-container:not([display=\'true\']').forEach( node => {
            const target = node.parentNode
            if (!target.classList.contains('has-jax')) {
              target.classList.add('mathjax-overflow')
            }
          })
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>function loadWaline () {
  function initWaline () {
    const waline = new Waline(Object.assign({
      el: '#waline-wrap',
      serverURL: 'https://qidaink-blog-comment.vercel.app/',
      avatar: 'identicon',
      path: location.pathname,
      emojiCDN: 'https://cdn.jsdelivr.net/gh/GamerNoTitle/ValineCDN@master/',
      emojiMaps: "",
      visitor: false
    }, {"lang":"zh-CN","pageSize":5,"requiredFields":["nick","mail"],"anonymous":null,"placeholder":"(ฅ>ω<*ฅ)欢迎大家评论呀!","avatarCDN":"https://sdn.geekzu.org/avatar/","langMode":{"admin":"可爱的博主","nick":"昵称(必填)","mail":"邮箱(必填)","link":"网址(选填)","sofa":"这里冷冷清清的，快来留下你的脚印吧(ฅ>ω<*ฅ)"}}))
  }

  if (typeof Waline === 'function') initWaline() 
  else getScript('https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js').then(initWaline)
}

if ('Waline' === 'Waline' || !false) {
  if (false) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
  else setTimeout(loadWaline, 0)
} else {
  function loadOtherComment () {
    loadWaline()
  }
}</script><script>(()=>{
  const $countDom = document.getElementById('twikoo-count')
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'qidaink-twikoo-0g5tijvr7bf0f59e',
      region: ''
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'qidaink-twikoo-0g5tijvr7bf0f59e',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      $countDom.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const loadTwikoo = (bool = false) => {
    if (typeof twikoo === 'object') {
      init()
      bool && $countDom && setTimeout(getCount,0)
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(()=> {
        init()
        bool && $countDom && setTimeout(getCount,0)
      })
    }
  }

  if ('Waline' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo(true)
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><div class="aplayer no-destroy" data-id="7274703654" data-server="tencent" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="false" muted> </div><script defer src = "https://unpkg.com/hexo-qidaink-live2d@1.1.1/live2d-widget/autoload.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script src="//code.tidio.co/abi9wtgmqlz8ckqgp56ysmntgiob4vfs.js" async="async"></script><script>function onTidioChatApiReady() {
  window.tidioChatApi.hide();
  window.tidioChatApi.on("close", function() {
    window.tidioChatApi.hide();
  });
}
if (window.tidioChatApi) {
  window.tidioChatApi.on("ready", onTidioChatApiReady);
} else {
  document.addEventListener("tidioChat-ready", onTidioChatApiReady);
}

var chatBtnFn = () => {
  document.getElementById("chat_btn").addEventListener("click", function(){
    window.tidioChatApi.show();
    window.tidioChatApi.open();
  });
}
chatBtnFn()
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script>
    // 全局变量声明区域
    var fdata = {
      apiurl: 'https://hexo-circle-of-friends-rose.vercel.app/all',
      initnumber: 20, //【可选】页面初始化展示文章数量
      stepnumber: 10, //【可选】每次加载增加的篇数
      error_img: 'https://cdn.jsdelivr.net/npm/akilar-candyassets/image/404.gif' //【可选，头像图片加载失败时的默认头像】
    }
    //存入本地存储
    localStorage.setItem("fdatalist",JSON.stringify(fdata))
    </script>
    <script defer src="https://cdn.jsdelivr.net/npm/hexo-filter-fcircle/assets/js/fetch.min.js"></script> <script data-pjax>
                            if(document.getElementById('recent-posts') && location.pathname =='/'){
                                var parent = document.getElementById('recent-posts');
                                var child = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms"></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
                                console.log('swiper-bar加载成功');
                                parent.insertAdjacentHTML("afterbegin",child);
                                <!-- Inside a callback or Promise that runs after new DOM content has been inserted -->
                                <!-- 以下语句是为了适配 pjax，由于插入 html 片段发生在 pjax 初始化之后，所以此链接中的 a 标签跳转会导致全局页面刷新，而以下的 refresh() 函数可以很好的解决这个问题 -->
                                var newContent = document.querySelector("#recent-posts");
                                pjax.refresh(newContent);
                            }
                        </script>
                        <!-- Swiper JS -->
                        <script data-pjax src = "https://unpkg.com/swiper@6.5.9/swiper-bundle.js"></script>
                        <!-- Initialize Swiper -->
                        <script data-pjax src = "https://unpkg.com/hexo-qidaink-swiper_bar/src/swiper-init.js"></script>
                        <style></style><!-- hexo injector body_end end --></body></html>